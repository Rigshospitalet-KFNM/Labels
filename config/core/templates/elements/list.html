{% extends "base.html" %}
{% load sort_helpers %}

{% block content %}
  <h1>Elements</h1>

<form method="get" class="search-sort-form" id="filters-form">
  <!-- Search -->
  <input type="text" name="q" placeholder="Search..."
         value="{{ request.GET.q|default:'' }}">

  <button type="submit" class="button button-primary">Search</button>

    <!-- Symbol length -->
  <label>
    <select name="symbol_len" onchange="document.getElementById('filters-form').submit();">
      <option value="">All</option>
      <option value="2" {% if request.GET.symbol_len == "2" %}selected{% endif %}>2 letters</option>
      <option value="3plus" {% if request.GET.symbol_len == "3plus" %}selected{% endif %}>3+ letters</option>
    </select>
  </label>

  <!-- Radioactive toggle -->
  <label>
    <input type="checkbox" name="radioactive" value="yes"
           {% if request.GET.radioactive == "yes" %}checked{% endif %}
           onchange="document.getElementById('filters-form').submit();">
    Radioactive
  </label>



  </form>

  <div class="spacer-small"></div>

  <div class="listDiv">
    <div class="list-header">
      <span class="col-1">{% sort_link "symbol" "symbol" %}</span>
      <span class="col-1">{{ "Radioactive?" }}</span>
      <span class="actions">Actions</span>
    </div>
    <ul>
      {% for element in elements %}
        <li>
          <span class="col-1">{{ element.symbol }}</span>
          <span class="col-2">
            {% if element.radioactive %}
              ☑
            {% else %}
              ☒
            {% endif %}
          </span>
          {% if user.is_authenticated %}
            <span class="actions">
              <a href="{% url 'element_edit' element.pk %}" class="button button-secondary">Edit</a>
              <a href="{% url 'element_delete' element.pk %}" class="button button-secondary">Delete</a>
            </span>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="spacer-small"></div>
  {% if user.is_authenticated %}
    <a href="{% url 'element_add' %}" class="button button-primary">Add New Element</a>
  {% endif %}
{% endblock %}
